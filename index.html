<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trust Filter AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 text-slate-900">
  <div class="max-w-3xl mx-auto px-4 py-10">
    <header class="mb-6">
      <h1 class="text-3xl font-bold">Trust Filter AI</h1>
      <p class="text-slate-600 mt-2">
        Paste text or upload a document. Get a risk score + verification checklist + a safe reply you can send.
      </p>
    </header>

    <div class="bg-white rounded-2xl shadow p-5 space-y-4">
      <div class="flex items-center justify-between">
        <div class="text-sm text-slate-600">
          Status: <span id="statusText" class="font-medium">Ready</span>
        </div>
        <div class="text-sm">
          Free uses left:
          <span id="freeLeft" class="font-semibold">—</span>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Category</label>
        <select id="category" class="w-full border rounded-xl px-3 py-2">
          <option value="real_estate">Real Estate</option>
          <option value="job_offer">Job Offer</option>
          <option value="investment">Investment</option>
          <option value="invoice">Invoice / Supplier</option>
          <option value="general" selected>General</option>
        </select>
      </div>

      <!-- Upload + Paste area -->
      <div class="space-y-2">
        <div class="flex items-center justify-between gap-3">
          <label class="block text-sm font-medium">Paste the content</label>

          <label class="text-sm bg-slate-100 px-3 py-2 rounded-xl hover:bg-slate-200 cursor-pointer">
            Upload document
            <input id="fileInput" type="file" class="hidden" accept=".pdf,.docx,.txt" />
          </label>
        </div>

        <div class="text-xs text-slate-500">
          Upload supported: <b>PDF (text-based)</b>, <b>DOCX</b>, <b>TXT</b>.
          Scanned image PDFs need OCR (can be added next).
        </div>

        <div id="fileStatus" class="text-xs text-slate-600"></div>

        <textarea id="content" rows="9" class="w-full border rounded-xl px-3 py-2"
          placeholder="Example: Pay the deposit today or you lose the deal. Don’t tell anyone…"></textarea>

        <div class="text-xs text-slate-500">Tip: include any payment details mentioned.</div>
      </div>

      <div class="flex gap-3">
        <button id="analyzeBtn" class="bg-black text-white px-4 py-2 rounded-xl hover:opacity-90">
          Analyze
        </button>
        <button id="clearBtn" class="bg-slate-100 px-4 py-2 rounded-xl hover:bg-slate-200 rounded-xl">
          Clear
        </button>
      </div>
    </div>

    <!-- Results -->
    <div id="resultWrap" class="mt-6 hidden">
      <div class="bg-white rounded-2xl shadow p-5 space-y-4">
        <div class="flex flex-wrap items-center gap-3">
          <div class="text-lg font-semibold">Result</div>
          <span id="riskBadge" class="text-xs px-3 py-1 rounded-full bg-slate-100">—</span>
          <span class="text-sm text-slate-600">Score: <span id="scoreText" class="font-semibold">—</span>/100</span>
        </div>

        <div>
          <div class="text-sm font-medium mb-1">Manipulation tactics detected</div>
          <ul id="tacticsList" class="list-disc ml-5 text-slate-700"></ul>
        </div>

        <div>
          <div class="text-sm font-medium mb-1">Missing proof (what to request)</div>
          <ul id="missingList" class="list-disc ml-5 text-slate-700"></ul>
        </div>

        <div>
          <div class="text-sm font-medium mb-1">Verification checklist</div>
          <ul id="checkList" class="list-disc ml-5 text-slate-700"></ul>
        </div>

        <div>
          <div class="text-sm font-medium mb-1">Safe reply you can send</div>
          <textarea id="safeReply" rows="5" class="w-full border rounded-xl px-3 py-2"></textarea>
          <button id="copyReplyBtn" class="mt-2 bg-slate-100 px-3 py-2 rounded-xl hover:bg-slate-200 text-sm">
            Copy reply
          </button>
        </div>

        <div class="text-xs text-slate-500" id="disclaimerText"></div>

        <!-- Paywall -->
        <div id="paywall" class="hidden mt-4 p-4 rounded-xl bg-amber-50 border border-amber-200">
          <div class="font-semibold">Free limit reached</div>
          <div class="text-sm text-slate-700 mt-1">
            You’ve used all 10 free analyses. Upgrade to continue.
          </div>
          <button class="mt-3 bg-black text-white px-4 py-2 rounded-xl hover:opacity-90">
            Upgrade (coming soon)
          </button>
        </div>
      </div>
    </div>

    <footer class="mt-8 text-xs text-slate-500">
      Backend: <span id="apiUrlText"></span>
    </footer>
  </div>

  <!-- PDF.js (for PDF text extraction) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.js"></script>

  <!-- Mammoth (for DOCX text extraction) -->
  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>

  <!-- Your App -->
  <script src="./app.js"></script>
</body>
</html>
